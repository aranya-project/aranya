services:
  operator:
    image: aranya-multirust-operator
    build:
      context: ../../
      dockerfile: examples/multirust/Dockerfile
      target: operator
    init: true
    environment:
      - ARANYA_SYNC_ADDR=0.0.0.0:1111
      - ARANYA_MEMBER_A_NET_ID=member-a:2222
      - ARANYA_MEMBER_B_NET_ID=member-b:2222

  member-a:
    image: aranya-multirust-member-a
    build:
      context: ../../
      dockerfile: examples/multirust/Dockerfile
      target: member-a
    init: true
    environment:
      - ARANYA_AQC_ADDR=0.0.0.0:2222
      - ARANYA_OPERATOR_SYNC_ADDR=operator:1111
      - ARANYA_MEMBER_B_NET_ID=member-b:2222

  member-b:
    image: aranya-multirust-member-b
    build:
      context: ../../
      dockerfile: examples/multirust/Dockerfile
      target: member-b
    init: true
    environment:
      - ARANYA_AQC_ADDR=0.0.0.0:2222
      - ARANYA_OPERATOR_SYNC_ADDR=operator:1111
